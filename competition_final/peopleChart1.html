<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <style>
        html body #aaaChart {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
<div id="aaaChart" style="height: 800px;width:1200px;background:transparent;margin:20px 0 0;margin: 0 auto"></div>

<script src="./js/jquery.js"></script>
<script src="./js/echarts.min.js"></script>
<script>

    var city = [
        "天津", "重庆", "成都",
        "武汉", "杭州", "南京",
        "长沙", "郑州", "济南",
        "合肥", "西安", "福州",
        "哈尔滨", "长春", "石家庄",
        "沈阳", "鄂尔多斯", "南昌",
        "厦门", "呼和浩特", "太原",
        "珠海", "银川", "海口"
    ];

    // 基于准备好的dom，初始化echarts实例
    var app = echarts.init(document.getElementById('aaaChart'));
    var dataMap = {};

    function dataFormatter(obj) {
        var pList = ['北京', '天津', '河北', '山西', '内蒙古', '辽宁', '吉林', '黑龙江', '上海', '江苏', '浙江', '安徽', '福建', '江西', '山东', '河南', '湖北', '湖南', '广东', '广西', '海南', '重庆', '四川', '贵州', '云南', '西藏', '陕西', '甘肃', '青海', '宁夏', '新疆'];
        var temp;
        for (var year = 2016; year <= 2018; year++) {
            var max = 0;
            var sum = 0;
            temp = obj[year];
            for (var i = 0, l = temp.length; i < l; i++) {
                max = Math.max(max, temp[i]);
                sum += temp[i];
                obj[year][i] = {
                    name: pList[i],
                    value: temp[i]
                }
            }
            obj[year + 'max'] = Math.floor(max / 100) * 100;
            obj[year + 'sum'] = sum;
        }
        console.log('obj',obj);
        return obj;
    }

    dataMap.dataGDP = dataFormatter({
        //max : 60000,
        2018: [16251.93, 11307.28, 24515.76, 11237.55, 14359.88, 22226.7, 10568.83, 12582, 19195.69, 49110.27, 32318.85, 15300.65, 17560.18, 11702.82, 45361.85, 26931.03, 19632.26, 19669.56, 53210.28, 11720.87, 2522.66, 10011.37, 21026.68, 5701.84, 8893.12, 605.83, 12512.3, 5020.37, 1670.44, 2102.21, 6610.05],
        2017: [14113.58, 9224.46, 20394.26, 9200.86, 11672, 18457.27, 8667.58, 10368.6, 17165.98, 41425.48, 27722.31, 12359.33, 14737.12, 9451.26, 39169.92, 23092.36, 15967.61, 16037.96, 46013.06, 9569.85, 2064.5, 7925.58, 17185.48, 4602.16, 7224.18, 507.46, 10123.48, 4120.75, 1350.43, 1689.65, 5437.47],
        2016: [12153.03, 7521.85, 17235.48, 7358.31, 9740.25, 15212.49, 7278.75, 8587, 15046.45, 34457.3, 22990.35, 10062.82, 12236.53, 7655.18, 33896.65, 19480.46, 12961.1, 13059.69, 39482.56, 7759.16, 1654.21, 6530.01, 14151.28, 3912.68, 6169.75, 441.36, 8169.8, 3387.56, 1081.27, 1353.31, 4277.05],
    });


    option = {
        baseOption: {
            color: ['#4e3929'],

            timeline: {

                // y: 0,
                axisType: 'category',
                // realtime: false,
                // loop: false,
                autoPlay: true,
                // currentIndex: 2,
                playInterval: 2000,
                // controlStyle: {
                //     position: 'left'
                // },
                lineStyle: {
                    color: '#666',
                    width: 1,
                    type: 'dashed'
                },
                controlStyle: {},
                checkpointStyle: {
                    // symbol : 'auto',
                    // symbolSize : 'auto',
                    color: '#4e3929',
                    borderColor: '#4e3929',
                    borderWidth: '#4e3929',
                    label: {
                        show: true,
                        textStyle: {
                            color: '#4e3929'
                        }
                    }
                },
                data: ['2016-01-01', '2017-01-01', '2018-01-01'],
                color: ['#4e3929'],
                // label: {
                //     normal: {
                //         show: true,//显示省份标签
                //         // textStyle:{color:"#c71585"}//省份标签字体颜色
                //     },
                //     emphasis: {
                //         show: true,//对应的鼠标悬浮效果
                //         // textStyle:{color:"#800080"}
                //     }
                // },

                label: {
                    formatter: function (s) {
                        return (new Date(s)).getFullYear();
                    },
                    normal: {
                        color: "#4e3929",

                    },
                }
            },
            title: {
                subtext: '数据来自国家统计局'
            },
            tooltip: {},
            legend: {
                x: 'right',
                // data: ['第一产业', '第二产业', '第三产业', 'GDP', '金融', '房地产'],
                // data: ['第一产业', '第二产业', '第三产业', 'GDP', '金融', '房地产'],
                selected: {
                    // 'GDP': false, '金融': false, '房地产': false
                }
            },
            calculable: true,
            grid: {
                top: 80,
                bottom: 100,
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow',
                        label: {
                            show: true,
                            formatter: function (params) {
                                return params.value.replace('\n', '');
                            }
                        }
                    }
                }
            },
            xAxis: [
                {
                    'type': 'category',
                    'axisLabel': {'interval': 0},
                    'data': [
                        '北京', '\n天津', '河北', '\n山西', '内蒙古', '\n辽宁', '吉林', '\n黑龙江',
                        '上海', '\n江苏', '浙江', '\n安徽', '福建', '\n江西', '山东', '\n河南',
                        '湖北', '\n湖南', '广东', '\n广西', '海南', '\n重庆', '四川', '\n贵州',
                        '云南', '\n西藏', '陕西', '\n甘肃', '青海', '\n宁夏', '新疆'
                    ],
                    splitLine: {show: false}
                }
            ],
            yAxis: [
                {
                    type: 'value',
                    name: '劳动力数量（人）'
                }
            ],
            series: [
                {
                    name: '人数',
                    type: 'bar',
                },
            ]
        },
        options: [
            {
                title: {text: '2016全国宏观经济指标'},
                series: [
                    {data: dataMap.dataGDP['2016']},
                ]

            },
            {
                title: {text: '2017全国宏观经济指标'},
                series: [
                    {data: dataMap.dataGDP['2017']},
                ]
            },
            {
                title: {text: '2018全国宏观经济指标'},
                series: [
                    {data: dataMap.dataGDP['2018']},
                ]
            },
        ]
    };
    app.setOption(option);
</script>
</body>
</html>